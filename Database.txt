CREATE DATABASE medconnect;
USE medconnect;

CREATE TABLE doctors (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100),
  email VARCHAR(100) UNIQUE,        //This is the Signup/Login Database
  specialization VARCHAR(100),
  password VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

USE medconnect;

CREATE TABLE posts (
  id INT AUTO_INCREMENT PRIMARY KEY,
  doctor_id INT,
  content TEXT,
  image VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (doctor_id) REFERENCES doctors(id) ON DELETE CASCADE
);

-- Likes table
CREATE TABLE likes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  doctor_id INT,
  post_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY unique_like (doctor_id, post_id),
  FOREIGN KEY (doctor_id) REFERENCES doctors(id) ON DELETE CASCADE,
  FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE
);

-- Comments table
CREATE TABLE comments (
  id INT AUTO_INCREMENT PRIMARY KEY,
  doctor_id INT,
  post_id INT,
  content TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (doctor_id) REFERENCES doctors(id) ON DELETE CASCADE,
  FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE
);

//Updated table 01
ALTER TABLE doctors
ADD COLUMN status ENUM('pending','verified','rejected') DEFAULT 'pending';

//Updated table 02
ALTER TABLE doctors
ADD COLUMN profile_image VARCHAR(255) NULL,
ADD COLUMN about TEXT NULL,
ADD COLUMN profession VARCHAR(100) NULL;

//Query
SELECT profile_image FROM doctors WHERE id = 1;


